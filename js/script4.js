const text = {
  fr: {
    // Menu Hamburger
    navAccueil: "Accueil",
    navProjets: "Projets",
    navContact: "Contact",
    navAPropos: "À propos",
    navInfo: "Info",
    navCV: "CV",
    theme: 'Thème',
    // Sections
    sectionIntroTitle: "Introduction",
    sectionIntroText: "Né au Portugal, je suis passionné par le développement web, à la fois front-end et back-end. Et non, tous les geeks ne passent pas *que* leur vie derrière un écran... parfois, on touche aussi de l’herbe (vraie ou en CSS) .",
    sectionSportTitle: "Sport & Karaté",
    sectionSportText: `J'adore énormément le sport, ce qui m’a permis d’avoir une carrière dans le karaté. Toute ma vie tourne autour de ce sport : compétitions, cours donnés à des enfants, coaching d’enfants… Voici quelques résultats marquants :\r\n- 2020 : Championnat de France — 3ème place\r\n- 2021 : Compétition internationale au Portugal — 1ère place\r\n- 2021 : Compétition internationale au Luxembourg — 1ère place\r\n- 2022 : Compétition internationale en Belgique — 1ère place`,
    cvButtonText: "Télécharger mon CV",
    cvButtonView: "Voir le CV",
    sectionParcoursTitle: "Parcours",
    parcoursBrevet: "Brevet des collèges — Mention Bien\nCollège Auguste Delaune, Bobigny",
    parcoursBac: "Baccalauréat — Spécialités Mathématiques & NSI\nLycée Paul Le Rolland, Drancy",
    parcoursMMI: "BUT MMI — 2ᵉ année\nIUT de Bobigny, Université Sorbonne Paris Nord\nParcours Développement Web",
    sectionSkillsTitle: "Compétences",
    sectionCertificationsTitle: "Certifications & Diplômes",
    certPSC1: "Prévention et Secours Civiques de niveau 1",
    certPSSM: "Premiers Secours en Santé Mentale",
    certDIF: "Diplôme d’Instructeur Fédéral — Karaté",

    // TRADUCTIONS FOOTER AJOUTÉES
    allRightsReserved: "Tous droits réservés",
    footerMentions: "Mentions Légales"
  },
  en: {
    // Menu Hamburger
    navAccueil: "Home",
    navProjets: "Projects",
    navContact: "Contact",
    navAPropos: "About",
    navInfo: "Info",
    navCV: "CV",
    theme: 'Theme',
    // Sections
    sectionIntroTitle: "Introduction",
    sectionIntroText: "Born in Portugal, I am passionate about web development, both front-end and back-end. And no, not all geeks spend *only* their lives behind a screen... sometimes we touch grass too (real or in CSS) .",
    sectionSportTitle: "Sports & Karate",
    sectionSportText: `I love sports very much, which allowed me to have a career in karate. My whole life revolves around this sport: competitions, classes given to children, children's coaching... Here are some notable results:\r\n- 2020: French Championship — 3rd place\r\n- 2021: International Competition in Portugal — 1st place\r\n- 2021: International Competition in Luxembourg — 1st place\r\n- 2022: International Competition in Belgium — 1st place`,
    cvButtonText: "Download my CV",
    cvButtonView: "View CV",
    sectionParcoursTitle: "Education",
    parcoursBrevet: "Middle School Certificate — Honors\nAuguste Delaune Middle School, Bobigny",
    parcoursBac: "High School Diploma — Mathematics & Computer Science\nPaul Le Rolland High School, Drancy",
    parcoursMMI: "Bachelor in Multimedia & Internet — 2nd year\nIUT of Bobigny, Sorbonne Paris Nord University\nWeb Development track",
    sectionSkillsTitle: "Skills",
    sectionCertificationsTitle: "Certifications",
    certPSC1: "First Aid and Emergency Response (Level 1)",
    certPSSM: "Mental Health First Aid",
    certDIF: "Federal Instructor Diploma — Karate",

    // TRADUCTIONS FOOTER AJOUTÉES
    allRightsReserved: "All rights reserved",
    footerMentions: "Legal Notice"
  },
  pt: {
    // Menu Hamburger
    navAccueil: "Início",
    navProjets: "Projetos",
    navContact: "Contato",
    navAPropos: "Sobre",
    navInfo: "Info",
    navCV: "CV",
    theme: 'Tema',
    // Sections
    sectionIntroTitle: "Introdução",
    sectionIntroText: "Nascido em Portugal, sou um entusiasta do desenvolvimento web, tanto front-end quanto back-end. E não, nem todos os geeks passam *apenas* a vida atrás de um ecrã... às vezes também tocamos relva (real ou em CSS) .",
    sectionSportTitle: "Desporto & Karaté",
    sectionSportText: `Adoro muito desporto, o que me permitiu ter uma carreira no karaté. Toda a minha vida gira em torno deste desporto: competições, aulas dadas a crianças, treino de crianças... Aqui estão alguns resultados notáveis:\r\n- 2020: Campeonato Francês — 3º lugar\r\n- 2021: Competição Internacional em Portugal — 1º lugar\r\n- 2021: Competição Internacional no Luxemburgo — 1º lugar\r\n- 2022: Competição Internacional na Bélgica — 1º lugar`,
    cvButtonText: "Baixar meu CV",
    cvButtonView: "Ver CV",
    sectionParcoursTitle: "Percurso Académico",
    parcoursBrevet: "Diploma do ensino básico — Menção Bom\nColégio Auguste Delaune, Bobigny",
    parcoursBac: "Ensino secundário — Matemática & Informática\nLiceu Paul Le Rolland, Drancy",
    parcoursMMI: "Licenciatura MMI — 2º ano\nIUT de Bobigny, Universidade Sorbonne Paris Nord\nPercurso Desenvolvimento Web",
    sectionSkillsTitle: "Competências",
    sectionCertificationsTitle: "Certificações",
    certPSC1: "Primeiros Socorros — Nível 1",
    certPSSM: "Primeiros Socorros em Saúde Mental",
    certDIF: "Diploma de Instrutor Federal — Karaté",

    // TRADUCTIONS FOOTER AJOUTÉES
    allRightsReserved: "Todos os direitos reservados",
    footerMentions: "Aviso Legal" // Corrigé
  },
  es: {
    // Menu Hamburger
    navAccueil: "Inicio",
    navProjets: "Proyectos",
    navContact: "Contacto",
    navAPropos: "Acerca de",
    navInfo: "Info",
    navCV: "CV",
    theme: 'Tema',
    // Sections
    sectionIntroTitle: "Introducción",
    sectionIntroText: "Nacido en Portugal, soy un entusiasta del desarrollo web, tanto front-end como back-end. Y no, no todos los geeks pasan *solo* la vida detrás de una pantalla... a veces también tocamos hierba (real o en CSS) .",
    sectionSportTitle: "Deporte & Karate",
    sectionSportText: `Me encanta mucho el deporte, lo que me permitió tener una carrera en karate. Toda mi vida gira en torno a este deporte: competiciones, clases impartidas a niños, entrenamiento de niños... Aquí hay algunos resultados notables:\r\n- 2020: Campeonato de Francia — 3er lugar\r\n- 2021: Competencia Internacional en Portugal — 1er lugar\r\n- 2021: Competencia Internacional en Luxemburgo — 1er lugar\r\n- 2022: Competencia Internacional en Bélgica — 1er lugar`,
    cvButtonText: "Descargar mi CV",
    cvButtonView: "Ver CV",
    sectionParcoursTitle: "Trayectoria Académica",
    parcoursBrevet: "Certificado de secundaria — Mención Bien\nColegio Auguste Delaune, Bobigny",
    parcoursBac: "Bachillerato — Matemáticas y Informática\nLiceo Paul Le Rolland, Drancy",
    parcoursMMI: "Grado MMI — Segundo año\nIUT de Bobigny, Universidad Sorbonne Paris Nord\nItinerario Desarrollo Web",
    sectionSkillsTitle: "Habilidades",
    sectionCertificationsTitle: "Certificaciones",
    certPSC1: "Primeros Auxilios — Nivel 1",
    certPSSM: "Primeros Auxilios en Salud Mental",
    certDIF: "Diploma de Instructor Federal — Karate",

    // TRADUCTIONS FOOTER AJOUTÉES
    allRightsReserved: "Todos los derechos reservados",
    footerMentions: "Aviso Legal"
  }
};

function applyText(lang) {
  const t = text[lang];

  // Sections
  document.querySelector('#section-intro h3').textContent = t.sectionIntroTitle;
  document.querySelector('#section-intro p').textContent = t.sectionIntroText;
  document.querySelector('#section-sport h3').textContent = t.sectionSportTitle;
  document.querySelector('#section-sport p').textContent = t.sectionSportText;
  const skillsTitle = document.querySelector('#section-skills h3');
  if (skillsTitle) skillsTitle.textContent = t.sectionSkillsTitle;
  const certTitle = document.querySelector('#section-certifications h3');
  if (certTitle) certTitle.textContent = t.sectionCertificationsTitle;

  ['certPSC1', 'certPSSM', 'certDIF'].forEach(key => {
  const el = document.querySelector(`[data-translate="${key}"]`);
  if (el && t[key]) el.textContent = t[key];
});

  const parcoursTitle = document.querySelector('#section-parcours h3');
  const brevet = document.querySelector('[data-translate="parcoursBrevet"]');
  const bac = document.querySelector('[data-translate="parcoursBac"]');
  const mmi = document.querySelector('[data-translate="parcoursMMI"]');

  if (parcoursTitle) parcoursTitle.textContent = t.sectionParcoursTitle;
  if (brevet) brevet.innerHTML = t.parcoursBrevet.replace(/\n/g, '<br>');
  if (bac) bac.innerHTML = t.parcoursBac.replace(/\n/g, '<br>');
  if (mmi) mmi.innerHTML = t.parcoursMMI.replace(/\n/g, '<br>');
  // Menu Hamburger & FOOTER
  const menuKeys = ['navAccueil','navProjets','navContact','navApropos','navInfo','navCV', 'theme', 'allRightsReserved', 'footerMentions', 'cvButtonText','cvButtonView'];
  menuKeys.forEach(key => {
    const el = document.querySelector(`[data-translate="${key}"]`);
    if (el) el.textContent = t[key];
  });
}

document.addEventListener('DOMContentLoaded', () => {
  const initialLang = localStorage.getItem('lang') || 'fr';
  const langSelect = document.getElementById('langSelect');

  applyText(initialLang);
  if (langSelect) langSelect.value = initialLang;

  if (langSelect) {
    langSelect.addEventListener('change', (e) => {
      const newLang = e.target.value;
      localStorage.setItem('lang', newLang);
      applyText(newLang);
    });
  }
});

// Rendre toggleTheme globalement accessible
function toggleTheme() {
  document.body.classList.toggle('light-theme');
}